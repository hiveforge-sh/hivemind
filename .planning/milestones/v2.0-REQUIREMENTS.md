# Requirements Archive: v2.0 Template System

**Archived:** 2026-01-26
**Status:** ✅ SHIPPED

This is the archived requirements specification for v2.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Hivemind v2.0 — Template System

**Defined:** 2026-01-25
**Core Value:** Consistent AI output. Give any AI tool context from your canon, get results that belong in your world — every time, across every tool.

## v2.0 Requirements

Requirements for the Template System milestone. Makes Hivemind domain-agnostic with pluggable templates.

### Template Infrastructure (INFRA)

- [x] **INFRA-01**: System loads template definitions from config at startup
- [x] **INFRA-02**: User can select active template via config.json
- [x] **INFRA-03**: User can define custom entity types via config without coding
- [x] **INFRA-04**: System generates Zod schemas dynamically from template config
- [x] **INFRA-05**: Existing worldbuilding vaults work unchanged (backwards compatible)
- [x] **INFRA-06**: Template registry validates config on load (reports invalid definitions)

### MCP Tool Generation (TOOL)

- [x] **TOOL-01**: System auto-generates `query_X` tool for each entity type in active template
- [x] **TOOL-02**: System auto-generates `list_X` tool for each entity type in active template
- [x] **TOOL-03**: Generated tools have template-specific descriptions (e.g., "Query a Person by ID")
- [x] **TOOL-04**: Generated tools integrate with existing search_vault filters
- [x] **TOOL-05**: Generated tools return type-aware formatted responses

### Relationship System (REL)

- [x] **REL-01**: Templates can define custom relationship types (e.g., `manages`, `reports_to`)
- [x] **REL-02**: Knowledge graph stores relationship types per edge
- [x] **REL-03**: System validates relationships against template-defined rules
- [x] **REL-04**: Generic wikilinks work as fallback when no typed relationship specified

### Built-in Templates (TMPL)

- [x] **TMPL-01**: Worldbuilding template ships as default (character, location, event, faction, lore, asset)
- [x] **TMPL-02**: Research template ships built-in (paper, citation, concept, note)
- [x] **TMPL-03**: People-management template ships built-in (person, goal, team, one_on_one)
- [x] **TMPL-04**: Each template includes sample vault structure and example entities

### Migration (MIGR)

- [x] **MIGR-01**: Extract current hardcoded worldbuilding schemas to template definition
- [x] **MIGR-02**: Current MCP tools refactored to use template system (not hardcoded)
- [x] **MIGR-03**: Database schema supports multiple entity types per template
- [x] **MIGR-04**: Test suite updated to test template system (not just worldbuilding)

## Future Requirements (v2.1+)

Deferred to future release. Tracked but not in current roadmap.

### Template Sharing

- **SHARE-01**: User can export custom template as JSON file
- **SHARE-02**: User can import template from JSON file
- **SHARE-03**: Template marketplace or gallery

### Advanced Features

- **ADV-01**: Template inheritance (custom extends built-in)
- **ADV-02**: Multi-template vaults (different folders use different templates)
- **ADV-03**: Template versioning and migration between versions

## Out of Scope

Explicitly excluded from v2.0. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Template marketplace | Focus on core system first |
| Template inheritance | Added complexity, defer to v2.1 |
| Multi-template vaults | One template per vault is simpler for v2.0 |
| GUI template editor | Config file is sufficient for v2.0 |
| Template versioning | Adds migration complexity |

## Traceability

Which phases cover which requirements.

| Requirement | Phase | Status |
|-------------|-------|--------|
| INFRA-01 | Phase 6 | ✅ Complete |
| INFRA-02 | Phase 6 | ✅ Complete |
| INFRA-03 | Phase 6 | ✅ Complete |
| INFRA-04 | Phase 6 | ✅ Complete |
| INFRA-06 | Phase 6 | ✅ Complete |
| INFRA-05 | Phase 7+11 | ✅ Complete |
| MIGR-01 | Phase 7 | ✅ Complete |
| MIGR-02 | Phase 7 | ✅ Complete |
| MIGR-03 | Phase 7 | ✅ Complete |
| MIGR-04 | Phase 7 | ✅ Complete |
| TOOL-01 | Phase 8 | ✅ Complete |
| TOOL-02 | Phase 8 | ✅ Complete |
| TOOL-03 | Phase 8 | ✅ Complete |
| TOOL-04 | Phase 8 | ✅ Complete |
| TOOL-05 | Phase 8 | ✅ Complete |
| REL-01 | Phase 9 | ✅ Complete |
| REL-02 | Phase 9 | ✅ Complete |
| REL-03 | Phase 9 | ✅ Complete |
| REL-04 | Phase 9 | ✅ Complete |
| TMPL-01 | Phase 10 | ✅ Complete |
| TMPL-02 | Phase 10 | ✅ Complete |
| TMPL-03 | Phase 10 | ✅ Complete |
| TMPL-04 | Phase 10 | ✅ Complete |

**Coverage:**
- v2.0 requirements: 22 total
- Shipped: 22
- Coverage: 100% ✓

---

## Milestone Summary

**Shipped:** 22 of 22 v2.0 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-26 as part of v2.0 milestone completion*
